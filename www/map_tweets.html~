<!DOCTYPE html>
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?sensor=false&libraries=visualization"></script>

<script>
var myCenter=new google.maps.LatLng(-37,-69);

function initialize()
{
var mapProp = {
  center:myCenter,
  zoom:4,
  mapTypeId:google.maps.MapTypeId.ROADMAP
  };

var map=new google.maps.Map(document.getElementById("googleMap"),mapProp);


    $.getJSON("retrieve.php",function(results){	
    	//alert(results.tweets[0].text);        
    	$.each(results.tweets, function(i, field){
    		var latLng = new google.maps.LatLng(field.lat, field.long);
    	     var marker = new google.maps.Marker({
    	         position: latLng,
    	         title: field.text,
    	         map: map
    	     });
    
          });
        });
	
}

google.maps.event.addDomListener(window, 'load', initialize);
</script>


<script>
$(document).ready(function(){
  $("#getTweets").click(function(){
    $.getJSON("retrieve.php",function(results){	
	//alert(results.tweets[0].text);        
	$.each(results.tweets, function(i, field){
	$("#tweetList").append("<li>"+ field.text + field.lat + " "+ field.long +"</li>");

      });
    });
  });
});
</script>
  



</head>

<body>
<div id="googleMap" style="width:500px;height:600px;margin-left:auto;margin-right: auto;"></div>
<button id="getTweets">Get Tweets</button>
<ol id="tweetList">
</ol>


</body>
</html>
